<!-- fournisseur-services2.html -->
<div class="debug-panel" *ngIf="true">
  <strong>Debug:</strong> ready = {{ ready }}<br>
  services = {{ services | json }}
</div>

<div class="container">
  <h2>Gestion des Services</h2>

  <form [formGroup]="serviceForm" (ngSubmit)="onSubmit()" class="service-form mat-elevation-z2">
    <mat-form-field appearance="fill">
      <mat-label>Titre</mat-label>
      <input matInput formControlName="title" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description" rows="2"></textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Catégorie</mat-label>
      <input matInput formControlName="category" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Prix</mat-label>
      <input matInput type="number" formControlName="price" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Localisation</mat-label>
      <input matInput formControlName="location" />
    </mat-form-field>

    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="loading">
        {{ editing ? 'Enregistrer' : 'Ajouter' }}
      </button>
      <button *ngIf="editing" mat-stroked-button color="warn" type="button" (click)="cancelEdit()">Annuler</button>
    </div>
  </form>

  <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

  <div *ngIf="ready && services.length > 0" class="service-list">
    <mat-card *ngFor="let service of services" class="service-card mat-elevation-z4">
      <mat-card-header>
        <mat-card-title>{{ service.title }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p><strong>Description:</strong> {{ service.description }}</p>
        <p><strong>Catégorie:</strong> {{ service.category }}</p>
        <p><strong>Prix:</strong> {{ service.price }} DT</p>
        <p><strong>Localisation:</strong> {{ service.location }}</p>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-button color="accent" (click)="editService(service)">Modifier</button>
        <button mat-button color="warn" (click)="deleteService(service.id)">Supprimer</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div *ngIf="ready && services.length === 0" class="no-services">
    <p>Aucun service disponible.</p>
  </div>
</div>
